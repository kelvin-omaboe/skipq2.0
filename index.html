<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkipQ - Ghana Bus Booking Platform</title>
    <!-- Firebase SDK -->


    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://kit.fontawesome.com/230abe04ec.js" crossorigin="anonymous"></script>
 

    <link rel="stylesheet" href="style.css">

</head>

<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-red-50 min-h-screen">
    <!-- Header -->
    <header class="skipq-gradient shadow-2xl">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">

                <!-- Logo + Title -->
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <div class="w-12 h-12 sm:w-14 sm:h-14  flex items-center justify-center ">
                            <span class="text-2xl sm:text-3xl"><img src="IMG_6083.PNG"></span>
                        </div>
                        <div class="absolute -top-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-red-500 rounded-full pulse-ring">
                        </div>
                    </div>
                    <div>
                        <h1 class="text-2xl sm:text-3xl font-bold text-white tracking-tight">SkipQ</h1>
                        <p class="text-red-100 text-xs sm:text-sm font-medium">Skip the Queue, Ride Smart</p>
                    </div>
                </div>

                <!-- User Info -->
                <div id="userInfo" class="hidden">
                    <div
                        class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg px-3 py-2 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4">
                        <div>
                            <span class="text-white text-sm">Welcome, </span>
                            <span id="userPhone" class="font-semibold text-yellow-200 text-sm"></span>
                        </div>
                        <button onclick="logout()"
                            class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs sm:text-sm transition duration-200">
                            Logout
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </header>


    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Login/Signup Screen -->
        <div id="authScreen" class="max-w-md mx-auto skipq-card rounded-2xl p-8 fade-in border border-gray-100">
            <div class="text-center mb-8">
                <div class="w-20 h-20  flex items-center justify-center mx-auto mb-4 ">
                    <span class="text-4xl text-white"><img src="IMG_6083.PNG"></span>
                </div>
                <h2
                    class="text-3xl font-bold bg-gradient-to-r from-red-600 to-blue-600 bg-clip-text text-transparent mb-2">
                    Welcome to SkipQ
                </h2>
                <p class="text-gray-600 font-medium">Skip the queue, Ride Smart</p>
            </div>
            
            

            <div class="space-y-6">
                <!-- Phone Number Input -->
                <div>
                    <label class="block text-sm font-bold text-gray-800 mb-3">üá¨üá≠ Ghana Mobile Number</label>
                    <div class="flex shadow-lg rounded-xl overflow-hidden">
                        <span
                            class="inline-flex items-center px-4 bg-gradient-to-r from-red-500 to-blue-500 text-white font-bold">+233</span>
                        <input type="tel" id="phoneInput" placeholder="XXX XXX XXX"
                            class="flex-1 border-0 px-4 py-4 focus:ring-2 focus:ring-red-500 focus:outline-none text-lg font-medium"
                            maxlength="11">
                    </div>
                    <div class="mt-3 p-3 bg-gradient-to-r from-blue-50 to-red-50 rounded-lg border border-blue-200">
                        <p class="text-sm text-blue-700 font-medium">Enter your mobile number to get started</p>

                    </div>
                </div>
                <!-- Firebase reCAPTCHA will be injected here -->
                <div id="recaptcha-container"></div>

                <!-- OTP Section -->
                <div id="otpSection" class="hidden">
                    <label class="block text-sm font-bold text-gray-800 mb-3">üîê Enter Verification Code</label>
                    <input type="text" id="otpInput" placeholder="Enter 6-digit code"
                        class="w-full rounded-xl border-2 border-gray-200 px-4 py-4 focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg font-mono text-center tracking-widest shadow-lg"
                        maxlength="6">
                    <p class="text-sm text-gray-600 mt-2 text-center"> OTP Code sent to (+233) <span
                            id="displayPhone"></span></p>
                </div>

                <!-- Auth Button -->
                <button id="authButton"
                    class="w-full skipq-button bg-red-600 text-white font-bold py-4 px-6 rounded-xl text-lg shadow-lg">
                    Sign in
                </button>



                <script type="module">
                    document.getElementById("authButton").addEventListener("click", handleAuth);
                    // ‚úÖ Firebase SDKs
                    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
                    import { getAuth, RecaptchaVerifier, signInWithPhoneNumber } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";

                    // ‚úÖ Your Firebase Config
                    const firebaseConfig = {
                        apiKey: "AIzaSyAVOqVMzyxdtdiNM9ZwYKKqZ6hD16q4iUQ",
                        authDomain: "skipq-5840a.firebaseapp.com",
                        projectId: "skipq-5840a",
                        storageBucket: "skipq-5840a.firebasestorage.app",
                        messagingSenderId: "780767557017",
                        appId: "1:780767557017:web:6d327faea9b0a58d678f08",
                        measurementId: "G-REK5510ZGZ"
                    };

                    // ‚úÖ Initialize Firebase
                    const app = initializeApp(firebaseConfig);
                    const auth = getAuth(app);

                    // üîπ Global state
                    let confirmationResult = null;
                    let isOtpSent = false;

                    async function handleAuth() {
                        const phoneInput = document.getElementById("phoneInput");
                        const otpInput = document.getElementById("otpInput");
                        const authButton = document.getElementById("authButton");
                        const otpSection = document.getElementById("otpSection");

                        if (authButton.disabled) return;

                        if (!isOtpSent) {
                            // validate number
                            const phone = phoneInput.value.replace(/\D/g, "");
                            if (!/^(2|5)\d{8}$/.test(phone)) {
                                alert("Please enter a valid 9-digit Ghana mobile number (starting with 2 or 5).");
                                return;
                            }


                            const fullPhone = "+233" + phone;

                            try {
                                // setup invisible reCAPTCHA once
                                if (!window.recaptchaVerifier) {
                                    window.recaptchaVerifier = new RecaptchaVerifier(
                                        auth,
                                        "recaptcha-container", // must match your <div id="recaptcha-container"></div>
                                        { size: "invisible" }
                                    );
                                }

                                // send OTP
                                confirmationResult = await signInWithPhoneNumber(auth, fullPhone, window.recaptchaVerifier);

                                document.getElementById("displayPhone").textContent = phoneInput.value;
                                otpSection.classList.remove("hidden");
                                authButton.textContent = "Verify OTP";
                                isOtpSent = true;
                                phoneInput.disabled = true;

                                alert("üì≤ OTP sent to " + fullPhone);

                            } catch (error) {
                                alert("‚ùå Error sending OTP: " + error.message);
                            }

                        } else {
                            const otp = otpInput.value;
                            if (otp.length !== 6) {
                                alert("Please enter a valid 6-digit OTP");
                                return;
                            }

                            // --- verification success (where you confirm the OTP) ---
                            try {
                                const result = await confirmationResult.confirm(otp);
                                const user = result.user;

                                if (!user) throw new Error("No user returned from OTP confirmation");

                                // Prefer the verified user's phoneNumber, fall back to the typed fullPhone
                                const phone = user.phoneNumber || user.phone || fullPhone || "Unknown";

                                // keep a reference in case other code reads it
                                window.currentUser = user;

                                console.log("Verified user:", user);
                                alert("‚úÖ Phone verified: " + phone);

                                // Pass the phone explicitly into the booking screen
                                showBookingScreen(phone);

                            } catch (error) {
                                console.error("OTP verification error:", error);
                                alert("‚ùå Invalid OTP: " + error.message);
                                authButton.disabled = false;
                                authButton.textContent = "Verify OTP";
                            }



                        }

                    }


                    // ‚úÖ expose function to button onclick
                    window.handleAuth = handleAuth;


                </script>

                <div class="mt-6 pt-6 border-t border-gray-200">
                    <button onclick="adminLogin()"
                        class="w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold py-3 px-6 rounded-xl text-lg shadow-lg transition duration-300">
                        üëë Admin Login
                    </button>
                    <p class="text-xs text-gray-500 text-center mt-2">Admin access for system management</p>
                </div>
            </div>
        </div>


        <!-- Booking Screen -->
        <div id="bookingScreen" class="hidden fade-in">
            <div class="max-w-4xl mx-auto">
                <div class="skipq-card rounded-2xl p-8 mb-8 border border-gray-100">
                    <div class="flex items-center space-x-4 mb-8">
                        <div class="w-12 h-12 skipq-gradient rounded-xl flex items-center justify-center">
                            <span class="text-2xl text-white">üé´</span>
                        </div>
                        <div>
                            <h2
                                class="text-3xl font-bold bg-gradient-to-r from-red-600 to-blue-600 bg-clip-text text-transparent">
                                Book Your Journey</h2>
                            <p class="text-gray-600 font-medium">Choose your departure station and destination</p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Departure Station Selection -->
                        <div class="bg-gradient-to-br from-blue-50 to-green-50 p-4 rounded-xl border border-blue-100">
                            <label class="block text-sm font-bold text-gray-800 mb-3">üöè Departure Station (Where you
                                are)</label>

                            <!-- Departure Region Selection -->
                            <select id="departureRegionSelect" onchange="updateDepartureStations()"
                                class="w-full rounded-xl border-2 border-gray-200 px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base font-medium shadow-lg bg-white mb-3">
                                <option value="">select your region</option>
                            </select>

                            <!-- Departure Station Selection -->
                            <select id="departureStationSelect" onchange="updateDestinations()" disabled
                                class="w-full rounded-xl border-2 border-gray-200 px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base font-medium shadow-lg bg-white disabled:bg-gray-100">
                                <option value="">choose your preferred station</option>
                            </select>
                        </div>

                        <!-- Destination Selection -->
                        <div class="bg-gradient-to-br from-red-50 to-orange-50 p-4 rounded-xl border border-red-100">
                            <label class="block text-sm font-bold text-gray-800 mb-3">üèôÔ∏è Destination (Where you're
                                going)</label>

                            <!-- Destination Region Selection -->
                            <select id="destinationRegionSelect" onchange="updateDestinationCities()" disabled
                                class="w-full rounded-xl border-2 border-gray-200 px-4 py-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 text-base font-medium shadow-lg bg-white disabled:bg-gray-100 mb-3">
                                <option value="">select destination region</option>
                            </select>

                            <!-- Destination City Selection -->
                            <select id="destinationSelect" disabled
                                class="w-full rounded-xl border-2 border-gray-200 px-4 py-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 text-base font-medium shadow-lg bg-white disabled:bg-gray-100">
                                <option value="">choose your destination</option>
                            </select>
                        </div>

                        <!-- Travel Date -->
                        <div class="bg-gradient-to-br from-red-50 to-blue-50 p-4 rounded-xl border border-red-100">
                            <label class="block text-sm font-bold text-gray-800 mb-3">üìÖ Travel Date</label>
                            <input type="date" id="travelDate" onchange="checkExcludedDate()"
                                class="w-full rounded-xl border-2 border-gray-200 px-4 py-4 focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg font-medium shadow-lg bg-white">
                            <div id="dateWarning" class="hidden mt-3 p-3 bg-red-100 border border-red-300 rounded-lg">
                                <div class="flex items-center space-x-2">
                                    <span class="text-red-600">‚ö†Ô∏è</span>
                                    <div>
                                        <p class="text-red-800 font-semibold text-sm">Date Not Available</p>
                                        <p id="dateWarningReason" class="text-red-700 text-sm"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Number of Passengers -->
                        <div class="bg-gradient-to-br from-blue-50 to-red-50 p-4 rounded-xl border border-blue-100">
                            <label class="block text-sm font-bold text-gray-800 mb-3">üë• Passengers</label>
                            <select id="passengerCount"
                                class="w-full rounded-xl border-2 border-gray-200 px-4 py-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-medium shadow-lg bg-white">
                                <option value="1">1Ô∏è‚É£ Passenger</option>
                                <option value="2">2Ô∏è‚É£ Passengers</option>
                                <option value="3">3Ô∏è‚É£ Passengers</option>
                                <option value="4">4Ô∏è‚É£ Passengers</option>
                                <option value="5">5Ô∏è‚É£ Passengers</option>
                            </select>
                        </div>
                    </div>

                    <!-- Price Display -->
                    <div id="priceDisplay"
                        class="hidden mt-8 p-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl border-2 border-green-200 shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-2xl">üí∞</span>
                                <span class="text-xl font-bold text-gray-800">Total Price:</span>
                            </div>
                            <span id="totalPrice"
                                class="text-3xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">GH‚Çµ
                                0</span>
                        </div>
                        <div class="flex justify-between items-center pt-4 border-t border-green-200">
                            <div class="flex items-center space-x-2">
                                <span class="text-lg">ü™ë</span>
                                <span class="text-sm font-medium text-gray-700">Seats Available:</span>
                            </div>
                            <span id="seatsAvailable" class="text-lg font-bold text-orange-600">0</span>
                        </div>
                    </div>

                    <!-- Payment Methods -->
                    <div id="paymentMethods"
                        class="hidden mt-8 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl border-2 border-purple-200 shadow-lg">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <span class="text-2xl mr-2">üí≥</span>
                            Choose Payment Method
                        </h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-white p-4 rounded-xl border-2 border-gray-200 hover:border-green-400 cursor-pointer transition-all duration-300"
                                onclick="selectPaymentMethod('card')">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">üí≥</div>
                                    <h4 class="font-bold text-gray-800">Card Payment</h4>
                                    <p class="text-sm text-gray-600">Visa, Mastercard, Verve</p>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-xl border-2 border-gray-200 hover:border-blue-400 cursor-pointer transition-all duration-300"
                                onclick="selectPaymentMethod('mobile_money')">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">üì±</div>
                                    <h4 class="font-bold text-gray-800">Mobile Money</h4>
                                    <p class="text-sm text-gray-600">MTN, Vodafone, AirtelTigo</p>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-xl border-2 border-gray-200 hover:border-purple-400 cursor-pointer transition-all duration-300"
                                onclick="selectPaymentMethod('bank_transfer')">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">üè¶</div>
                                    <h4 class="font-bold text-gray-800">Bank Transfer</h4>
                                    <p class="text-sm text-gray-600">Direct bank payment</p>
                                </div>
                            </div>
                        </div>
                        <div id="selectedPaymentMethod"
                            class="hidden mt-4 p-3 bg-green-100 border border-green-300 rounded-lg">
                            <p class="text-green-800 font-medium">‚úÖ Payment method selected: <span
                                    id="paymentMethodName"></span></p>
                        </div>
                    </div>

                    <button id="bookButton" onclick="initiatePayment()" disabled
                        class="w-full mt-8 skipq-secondary disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-4 px-6 rounded-2xl text-xl shadow-lg transition duration-300">
                        <span id="bookButtonText">üé´ Book Your Ticket Now</span>
                        <div id="paymentLoader"
                            class="hidden inline-block ml-2 w-5 h-5 border-2 border-white border-t-transparent rounded-full payment-loading">
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminScreen" class="hidden fade-in">
            <div class="max-w-6xl mx-auto">
                <!-- Admin Header -->
                <div class="skipq-card rounded-2xl p-4 sm:p-6 mb-6 border border-gray-100 w-full max-w-4xl mx-auto">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0">
                      <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0">
                        <div class="w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center">
                          <span class="text-2xl text-white">üëë</span>
                        </div>
                        <div>
                          <h2 class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent">
                            Admin Dashboard
                          </h2>
                          <p class="text-gray-600 font-medium text-sm sm:text-base">Manage routes, tickets, and bookings</p>
                        </div>
                      </div>
                  
                      <!--<button onclick="showBookingScreen()"
                              class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 sm:px-6 sm:py-3 rounded-xl transition duration-200 w-full sm:w-auto">
                        üë§ User View
                      </button>-->
                      
                    </div>
                  
                    <!-- Ticket Preview Section -->
                    <div class="p-4 sm:p-6 bg-white shadow-md rounded-2xl mt-6 w-full max-w-md mx-auto">
                      <h3 class="text-lg sm:text-xl font-bold text-gray-700 mb-2">üéüÔ∏è Ticket Preview</h3>
                      <p class="text-sm text-gray-500 mb-4">
                        Generate a sample ticket to test the layout before real bookings.
                      </p>
                      <button onclick="previewTicket()" 
                              class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-medium px-4 py-2 sm:px-6 sm:py-3 rounded-xl shadow transition-all duration-200">
                        Preview Sample Ticket
                      </button>
                    </div>
                  
                    <!-- Load libraries FIRST -->
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
                  </div>
                  

                <!-- Admin Tabs -->
                <div class="skipq-card rounded-2xl p-4 sm:p-6 mb-6 border border-gray-100">

                    <!-- Tabs (scrollable on mobile) -->
                    <div class="flex space-x-4 mb-6 border-b border-gray-200 overflow-x-auto no-scrollbar">
                        <button onclick="showAdminTab('routes')" id="routesTab"
                            class="admin-tab active px-3 sm:px-4 py-2 font-semibold text-red-600 border-b-2 border-red-600 flex-shrink-0 text-sm sm:text-base">
                            üõ£Ô∏è Routes
                        </button>
                        <button onclick="showAdminTab('capacity')" id="capacityTab"
                            class="admin-tab px-3 sm:px-4 py-2 font-semibold text-gray-500 hover:text-red-600 flex-shrink-0 text-sm sm:text-base">
                            üöå Bus Capacity
                        </button>
                        <button onclick="showAdminTab('schedule')" id="scheduleTab"
                            class="admin-tab px-3 sm:px-4 py-2 font-semibold text-gray-500 hover:text-red-600 flex-shrink-0 text-sm sm:text-base">
                            üìÖ Schedule
                        </button>
                        <button onclick="showAdminTab('bookings')" id="bookingsTab"
                            class="admin-tab px-3 sm:px-4 py-2 font-semibold text-gray-500 hover:text-red-600 flex-shrink-0 text-sm sm:text-base">
                            üé´ All Bookings
                        </button>
                        <button onclick="showAdminTab('payments')" id="paymentsTab"
                            class="admin-tab px-3 sm:px-4 py-2 font-semibold text-gray-500 hover:text-red-600 flex-shrink-0 text-sm sm:text-base">
                            üí≥ Payments
                        </button>
                    </div>

                    <!-- Routes -->
                    <div id="routesPanel" class="admin-panel">
                        <h3 class="text-lg sm:text-xl font-bold text-gray-800 mb-4">Manage Routes & Stations</h3>

                        <!-- Regions Management -->
                        <div class="bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow mb-6">
                            <h4 class="font-bold text-gray-800 mb-3 text-sm sm:text-base">üåç Manage Regions</h4>
                            <div class="flex space-x-2 mb-3">
                                <input id="regionName" type="text" placeholder="Region Name"
                                    class="border rounded-lg px-3 py-2 flex-1">
                                <button onclick="addRegion()" class="bg-blue-600 text-white px-4 py-2 rounded-lg">‚ûï
                                    Add</button>
                            </div>
                            <div id="regionsList" class="space-y-2"></div>
                        </div>

                        <!-- Stations Management -->
                        <div class="bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow mb-6">
                            <h4 class="font-bold text-gray-800 mb-3 text-sm sm:text-base">üöâ Manage Stations</h4>
                            <select id="stationRegionSelect" class="border rounded-lg px-3 py-2 w-full mb-3"></select>
                            <div class="flex space-x-2 mb-3">
                                <input id="stationName" type="text" placeholder="Station Name"
                                    class="border rounded-lg px-3 py-2 flex-1">
                                <button onclick="addStation()" class="bg-green-600 text-white px-4 py-2 rounded-lg">‚ûï
                                    Add</button>
                            </div>
                            <div id="stationsList" class="space-y-2"></div>
                        </div>

                        <!-- Destinations Management -->
                        <div class="bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow mb-6">
                            <h4 class="font-bold text-gray-800 mb-3 text-sm sm:text-base">üèôÔ∏è Manage Destinations</h4>
                            <select id="destinationRegionSelectAdmin"
                                class="border rounded-lg px-3 py-2 w-full mb-3"></select>
                            <div class="flex space-x-2 mb-3">
                                <input id="destinationName" type="text" placeholder="Destination Name"
                                    class="border rounded-lg px-3 py-2 flex-1">
                                <button onclick="addDestination()"
                                    class="bg-purple-600 text-white px-4 py-2 rounded-lg">‚ûï Add</button>
                            </div>
                            <div id="destinationsList" class="space-y-2"></div>
                        </div>

                        <!-- Routes Management -->
                        <div class="bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow mb-6">
                            <h4 class="font-bold text-gray-800 mb-3 text-sm sm:text-base">üõ£Ô∏è Manage Routes</h4>
                            <div class="grid grid-cols-2 gap-3 mb-3">
                                <select id="routeFromRegion" class="border rounded-lg px-3 py-2"></select>
                                <select id="routeFromStation" class="border rounded-lg px-3 py-2"></select>
                            </div>
                            <div class="grid grid-cols-2 gap-3 mb-3">
                                <select id="routeToRegion" class="border rounded-lg px-3 py-2"></select>
                                <select id="routeToDestination" class="border rounded-lg px-3 py-2"></select>
                            </div>
                            <button onclick="addRoute()" class="bg-red-600 text-white px-4 py-2 rounded-lg">‚ûï Add
                                Route</button>
                        </div>

                        <!-- Overview -->
                        <div
                            class="bg-gradient-to-br from-blue-50 to-green-50 p-4 sm:p-6 rounded-xl border border-blue-100 mb-6">
                            <h4 class="font-bold text-gray-800 mb-3 text-sm sm:text-base">üìä Current Routes Overview
                            </h4>
                            <div id="routesOverview" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Routes injected dynamically -->
                            </div>
                        </div>
                    </div>


                    <!-- Capacity -->
                    <div id="capacityPanel" class="admin-panel hidden">
                        <h3 class="text-lg sm:text-xl font-bold text-gray-800 mb-4">Bus Capacity Management</h3>
                        <div
                            class="bg-gradient-to-br from-green-50 to-blue-50 p-4 sm:p-6 rounded-xl border border-green-100">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                                <div>
                                    <label class="block text-xs sm:text-sm font-bold text-gray-800 mb-2">üöå Maximum
                                        Tickets Per Bus</label>
                                    <input type="number" id="maxTicketsInput" min="1" max="100"
                                        class="w-full rounded-lg border border-gray-300 px-3 sm:px-4 py-2 sm:py-3 focus:ring-2 focus:ring-green-500 text-sm sm:text-lg font-medium">
                                    <button onclick="updateMaxTickets()"
                                        class="w-full mt-3 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 sm:py-3 rounded-lg text-sm sm:text-base">
                                        Update Capacity
                                    </button>
                                </div>
                                <div class="bg-white p-3 sm:p-4 rounded-lg border border-gray-200">
                                    <h5 class="font-bold text-gray-800 mb-2 text-sm sm:text-base">üìä Current Status</h5>
                                    <div class="space-y-2 text-sm sm:text-base">
                                        <div class="flex justify-between">
                                            <span>Max Capacity:</span><span id="displayMaxTickets"
                                                class="font-bold text-blue-600">50</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Tickets Sold:</span><span id="displayTicketsSold"
                                                class="font-bold text-green-600">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Available:</span><span id="displayAvailable"
                                                class="font-bold text-orange-600">50</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Schedule -->
                    <div id="schedulePanel" class="admin-panel hidden">
                        <h3 class="text-lg sm:text-xl font-bold text-gray-800 mb-4">Schedule Management</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                            <div
                                class="bg-gradient-to-br from-red-50 to-orange-50 p-3 sm:p-4 rounded-xl border border-red-100">
                                <h4 class="font-bold text-gray-800 mb-3 text-sm sm:text-base">üö´ Exclude Dates</h4>
                                <div class="space-y-3">
                                    <input type="date" id="excludeDate"
                                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-red-500 text-sm">
                                    <input type="text" id="excludeReason" placeholder="Reason (optional)"
                                        class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-red-500 text-sm">
                                    <button onclick="excludeDate()"
                                        class="w-full skipq-button text-white font-semibold py-2 px-4 rounded-lg text-sm sm:text-base">Exclude
                                        Date</button>
                                </div>
                            </div>
                            <div
                                class="bg-gradient-to-br from-orange-50 to-red-50 p-3 sm:p-4 rounded-xl border border-orange-100">
                                <h4 class="font-bold text-gray-800 mb-3 text-sm sm:text-base">üìã Excluded Dates</h4>
                                <div id="excludedDatesList"
                                    class="space-y-2 max-h-40 overflow-y-auto text-sm sm:text-base">
                                    <p class="text-gray-500">No dates excluded</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bookings -->
                    <div id="bookingsPanel" class="admin-panel hidden">
                        <h3 class="text-lg sm:text-xl font-bold text-gray-800 mb-4">All Bookings Monitor</h3>
                        <div
                            class="bg-gradient-to-br from-blue-50 to-purple-50 p-3 sm:p-4 rounded-xl border border-blue-100">
                            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-2">
                                <h4 class="font-bold text-gray-800 text-sm sm:text-base">üìä Booking Statistics</h4>
                                <button onclick="refreshBookings()"
                                    class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs sm:text-sm">üîÑ
                                    Refresh</button>
                            </div>

                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6">
                                <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                                    <div class="text-xl sm:text-2xl font-bold text-blue-600" id="totalBookings">0</div>
                                    <div class="text-xs sm:text-sm text-gray-600">Total Bookings</div>
                                </div>
                                <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                                    <div class="text-xl sm:text-2xl font-bold text-green-600" id="totalRevenue">GH‚Çµ 0
                                    </div>
                                    <div class="text-xs sm:text-sm text-gray-600">Total Revenue</div>
                                </div>
                                <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                                    <div class="text-xl sm:text-2xl font-bold text-orange-600" id="totalPassengers">0
                                    </div>
                                    <div class="text-xs sm:text-sm text-gray-600">Total Passengers</div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                                <div class="bg-gray-50 px-3 py-2 border-b border-gray-200">
                                    <h5 class="font-bold text-gray-800 text-sm sm:text-base">Recent Bookings</h5>
                                </div>
                                <div id="bookingsList" class="max-h-60 overflow-y-auto text-sm">
                                    <div class="p-4 text-center text-gray-500">No bookings yet</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payments -->
                    <div id="paymentsPanel" class="admin-panel hidden">
                        <h3 class="text-lg sm:text-xl font-bold text-gray-800 mb-4">Payment Transactions</h3>
                        <div
                            class="bg-gradient-to-br from-green-50 to-blue-50 p-3 sm:p-4 rounded-xl border border-green-100">
                            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-4">
                                <h4 class="font-bold text-gray-800 text-sm sm:text-base">üí≥ Payment Statistics</h4>
                                <div class="flex flex-wrap gap-2">
                                    <button onclick="refreshPayments()"
                                        class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-xs sm:text-sm">üîÑ
                                        Refresh</button>
                                    <button onclick="exportPayments()"
                                        class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs sm:text-sm">üìä
                                        Export</button>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-6">
                                <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                                    <div class="text-xl sm:text-2xl font-bold text-green-600" id="successfulPayments">0
                                    </div>
                                    <div class="text-xs sm:text-sm text-gray-600">Successful</div>
                                </div>
                                <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                                    <div class="text-xl sm:text-2xl font-bold text-red-600" id="failedPayments">0</div>
                                    <div class="text-xs sm:text-sm text-gray-600">Failed</div>
                                </div>
                                <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                                    <div class="text-xl sm:text-2xl font-bold text-yellow-600" id="pendingPayments">0
                                    </div>
                                    <div class="text-xs sm:text-sm text-gray-600">Pending</div>
                                </div>
                                <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                                    <div class="text-xl sm:text-2xl font-bold text-purple-600" id="totalPaymentRevenue">
                                        GH‚Çµ 0</div>
                                    <div class="text-xs sm:text-sm text-gray-600">Revenue</div>
                                </div>
                            </div>
                            <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                                <div class="bg-gray-50 px-3 py-2 border-b border-gray-200">
                                    <h5 class="font-bold text-gray-800 text-sm sm:text-base">Recent Payment Transactions
                                    </h5>
                                </div>
                                <div id="paymentsList" class="max-h-60 overflow-y-auto text-sm">
                                    <div class="p-4 text-center text-gray-500">No payment transactions yet</div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

            </div>
        </div>

        <!-- Virtual Ticket Modal -->
        <div id="ticketModal"
            class="hidden fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-50">
            <div class="skipq-card rounded-2xl shadow-2xl max-w-md w-full slide-up border border-gray-200">
                <div class="p-8">
                    <div class="text-center mb-8">
                        <div
                            class="w-20 h-20 bg-gradient-to-r from-green-400 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                            <span class="text-4xl">üéâ</span>
                        </div>
                        <h3
                            class="text-3xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-2">
                            Payment Successful!</h3>
                        <p class="text-gray-600 font-medium">Your SkipQ e-ticket is ready</p>
                    </div>

                    <div class="skipq-gradient text-white p-6 rounded-2xl mb-6 shadow-xl">
                        <div class="flex justify-between items-start mb-6">
                            <div class="flex items-center space-x-3">
                                <span class="text-3xl">‚ö°</span>
                                <div>
                                    <h4 class="font-bold text-2xl">SkipQ</h4>
                                    <p class="text-red-100 font-medium">E-Ticket</p>
                                </div>
                            </div>
                            <div class="text-right bg-white bg-opacity-20 rounded-lg p-3">
                                <p class="text-sm text-red-100">Ticket ID</p>
                                <p id="ticketId" class="font-mono font-bold text-lg"></p>
                            </div>
                        </div>

                        <div class="border-t border-white border-opacity-30 pt-6">
                            <div class="grid grid-cols-2 gap-6 text-sm">
                                <div class="bg-white bg-opacity-10 rounded-lg p-3">
                                    <p class="text-red-100 mb-1">üöè From</p>
                                    <p id="ticketFrom" class="font-bold text-lg"></p>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3">
                                    <p class="text-red-100 mb-1">üèôÔ∏è To</p>
                                    <p id="ticketTo" class="font-bold text-lg"></p>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3">
                                    <p class="text-red-100 mb-1">üìÖ Date</p>
                                    <p id="ticketDate" class="font-bold text-lg"></p>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3">
                                    <p class="text-red-100 mb-1">üë• Passengers</p>
                                    <p id="ticketPassengers" class="font-bold text-lg"></p>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3 col-span-2">
                                    <p class="text-red-100 mb-1">ü™ë Seat Numbers</p>
                                    <p id="ticketSeats" class="font-bold text-lg"></p>
                                </div>
                                <div class="bg-white bg-opacity-10 rounded-lg p-3 col-span-2">
                                    <p class="text-red-100 mb-1">üí≥ Payment Method</p>
                                    <p id="ticketPaymentMethod" class="font-bold text-lg"></p>
                                </div>
                            </div>
                            <div class="mt-6 pt-6 border-t border-white border-opacity-30">
                                <div class="flex justify-between items-center bg-white bg-opacity-20 rounded-lg p-4">
                                    <span class="text-red-100 font-medium">üí∞ Total Paid</span>
                                    <span id="ticketPrice" class="font-bold text-2xl"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex space-x-4">
                        <button onclick="downloadTicket()"
                            class="flex-1 skipq-secondary text-white font-bold py-4 px-6 rounded-xl text-lg shadow-lg">
                            üì± Download Ticket
                        </button>
                        <button onclick="closeTicketModal()"
                            class="flex-1 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-400 text-gray-800 font-bold py-4 px-6 rounded-xl text-lg shadow-lg transition duration-300">
                            ‚ú® Book Another Trip
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <script src="script.js"></script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'974cae6ff7550338',t:'MTc1NjE0MTYwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>